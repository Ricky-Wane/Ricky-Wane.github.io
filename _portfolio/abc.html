<!DOCTYPE html>
<html>
	<h1>这是一道题</h1>
	<head>
		<meta charset="utf-8">
		<title></title>
		<style>
			#the_div {
				border: 1px solid black;
				width: 200px;
				height: 100px;
				overflow-y: scroll;
			}
			#info{
				position:absolute;
				top: 90px;
				left: 8px;
				width: 200px;
				height: 20px;
				background-color: #ffc34c;
				color: white;
				text-align: center;
				line-height: 20px;
				font-size: 12px;
				opacity:0.8;
				visibility: hidden;
			}
		</style>
	</head>
	<body>
		<div id="the_div" onscroll="scroll_move(this)" scrollTop="0"></div>
		<div id="info" onclick="go_bottom()">∨ 有更多新的消息</div>
		
		<script>
			var scroll_FLAG = true

			function scroll_move(div) {
				div_scrollTop = div.getAttribute("scrollTop");
				if (div.offsetHeight + div.scrollTop >= div.scrollHeight) {
					scroll_FLAG = true;
					document.getElementById("info").style.visibility = "hidden"
					return
				}else{
					scroll_FLAG = false;
					document.getElementById("info").style.visibility = "visible"
				}
			}

			function go_bottom() {
				var div = document.getElementById("the_div");
				div.scrollTo(0, div.scrollHeight);
			}
			
			function add_msg(){
				var div = document.getElementById("the_div");
				div.innerText += "123\n"
				if(scroll_FLAG){
					div.scrollTo(0,div.scrollHeight)
				}
			}
			
			setInterval(add_msg,2)
		</script>
	</body>
</html>

